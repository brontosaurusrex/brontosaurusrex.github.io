---
published: true
layout: post
date: '2020-09-02 12:34'
title: Ruby
tags: misc linux 
---
## Loops

Say woot

    5.times { print "woot " } 
    woot woot woot woot woot => 5

Unnamed parameter passed from iterator to the 'chute', where it gets a name n.

    1.upto(6) { |n| print n } 
    123456=> 1

Similar, with spaces, n gets converted to string

    1.upto(6) { |n| print n.to_s + " " } 
    1 2 3 4 5 6 => 1

Similar with do-end, puts is similar to print, but will add new-line

    1.upto(6) do |n| 
        puts n
    end

## Integer to float

    x = 10
    y = 3
    puts x.to_f / y.to_f
    3.333333333333333

## String

    x="Test"
    y="String"
    puts "Shiny!" if x + y == "TestString" 
    # if after the fact?
    Shiny!

### Multiline

Quotation marks replaced with %q and any wisely choosen delimeter

    x = %q( woot
    woot
    woot)
    
    puts x

    woot
    woot
    woot

## Interpolation

Expressions (and logic) directly in strings. Interpolation refers to the process of inserting the result of an expression into a string literal.

    x = 10 ; y = 20
    puts "#{x} + #{y} = #{x + y}"
    10 + 20 = 30

## Regex

For digits

    string = "Dog cost $100 and cat is $10"                
    string.scan(/\d+/) do |x| ; puts x ; end               
    100
    10
    # \d = any digit and + = match one or many
    
For set of vowels    
    
    "spamer".scan(/[aeiou]/) { |vowel| puts vowel }        
    a
    e

Match should return array of hits

    puts "string with vowels" if "This is a test".match(/[aeiou]/)
    string with vowels
    
## Arrays

Populate and empty an array

    x = []
    x << "Woot"
    x << "is"
    x << "this?"
    puts x.pop
    puts x.pop
    puts x.pop
    
Iterate over array
    
    [ "a", "b", "c"].each { |element| puts element }
    a
    b
    c

Convert on the fly

    [ 1,2,3,4 ].collect { |e| e*2 }
    [2, 4, 6, 8]

## Hashes 

This are key->value type of arrays (also known as lists or dictionaries)

> A Hash is a dictionary-like collection of unique keys and their values. Also called associative arrays, they are similar to Arrays, but where an Array uses integers as its index, a Hash allows you to use any object type.

One is two and two is three:

     h = { 1 => 2, 2 => 3 }
     h.each { |k, v| puts "#{k} = #{v}" }
    1 = 2
    2 = 3
    
^ Not sure why interpolation is needed here.

    p h.keys
    [1, 2]

^ What keys are in hash? (also h.values)

Btw: h.methods should show all methods for the object.

    h.methods
    => [:index, :<=, :replace, :==, :clear, :>=, :[], :to_h, :[]=, :include?, :empty?, :eql?, :fetch, :shift, :select!, :keep_if, :values_at, :inspect, :delete_if, :reject!, :assoc, :rassoc, :compact, :compact!, :flatten, :length, :size, :each, :<, :>, :default, :rehash, :store, :default=, :default_proc, :default_proc=, :to_hash, :to_proc, :each_key, :to_a, :to_s, :each_pair, ...

To determine the type of an object (in ruby that seems to eq to class)

    h.class
    => Hash
    
    42.class
    Integer
    
    42.1.class
    => Float
